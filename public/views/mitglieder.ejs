<%- include('partials/header/header') %>
<!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">-->
<!--<link rel="stylesheet" href="https://unpkg.com/formiojs@latest/dist/formio.full.min.css">-->
<script src="https://unpkg.com/formiojs@latest/dist/formio.full.min.js"></script>

<script>
    const res = () => {
    fetch('http://localhost:3000/getMemberData')
        .then(response => response.json())
        .then(data => function(data){
            let allMembers = data.results;
        });
    }

</script>


<main>
    <div class="card tableContainer">
        <div id="formio"></div>
    </div>
</main>
<script>
    Formio.createForm(document.getElementById('formio'), {
    components: [
        {
            label: "",
            key: 'members',
            type: 'editgrid',
            input: true,
            templates: {
                header: '' +
                        '<div class="row">' +
                        '  {% util.eachComponent(components, function(component) { %} ' +
                        '    <div class="col-sm-2">' +
                        '      <strong>{{ component.label }}</strong>' +
                        '    </div>' +
                        '  {% }) %}' +
                        '</div>',
                row: '' +
                        '<div class="row">' +
                        '  {%util.eachComponent(components, function(component) { %}' +
                        '    <div class="col-sm-2">' +
                        '      {{ row[component.key] }}' +
                        '    </div>' +
                        '  {% }) %}' +
                        '  <div class="col-sm-2">' +
                        '    <div class="btn-group pull-right">' +
                        '      <div class="btn btn-default btn-sm editRow"><i class="fa fa-edit"></i></div>' +
                        '      <div class="btn btn-danger btn-sm removeRow"><i class="fa fa-trash"></i></div>' +
                        '    </div>' +
                        '  </div>' +
                        '</div>',
                footer: ''
            },
            components: [
                {
                    label: 'Vorname',
                    key: 'firstName',
                    type: 'textfield',
                    input: true
                },
                {
                    label: 'Nachname',
                    key: 'lastName',
                    type: 'textfield',
                    input: true
                },
                {
                    label: 'Mobil',
                    key: 'mobile',
                    type: 'textfield',
                    input: true
                },
                {
                    label: 'Telefon',
                    key: 'phone',
                    inputType: 'textfield',
                    input: true
                },
                {
                    label: 'E-Mail',
                    key: 'email',
                    inputType: 'textfield',
                    input: true
                },
                {
                    label: 'Geburtstag',
                    key: 'birthday',
                    type: 'day',
                    input: true,
                    format: 'dd-mm-yyyy',
                    enableDate: true,
                    enableTime: false,
                    defaultDate: '',
                    datepickerMode: 'day',
                    datePicker: {
                        showWeeks: false,
                        startingDay: 0,
                        initDate: '',
                        minMode: 'day',
                        maxMode: 'year',
                        yearRows: 4,
                        yearColumns: 5,
                        datepickerMode: 'day'
                    }
                    },
                    {
                    label: 'Arbeitsstunden',
                    key: 'worked',

                    inputType: 'number',
                    input: false
                    },
                {
                    label: 'Mitglieds-Nr.',
                    key: 'memberNumber',
                    inputType: 'number',
                    input: true
                },
                {
                    label: 'Rechte',
                    key: 'role',
                    type: 'select',
                    input: true,
                    data: {
                        values: [
                            {
                                value: 'user',
                                label: 'User'
                            },
                            {
                                value: 'trainer',
                                label: 'Trainer'
                            },
                            {
                                value: 'admin',
                                label: 'Admin'
                            }
                        ]
                    },
                    dataSrc: 'values',
                    template: '<span>{{ item.label }}</span>'
                    },
                {
                    label: 'registriert seit',
                    key: 'createdAt',
                    type: 'day',
                    format: 'dd-mm-yyyy',
                    input: false
                }
            ]
        }
    ]
}).then(function(form) {
// Provide a default submission.

        form.submission =
            { allMembers }
            /*data: {
                members: [
                    {
                        firstName: 'Joe',
                        lastName: 'Smith',
                        gender: 'male',
                        dependant: true,
                        birthdate: '1982-05-18'
                    },
                    {
                        firstName: 'Mary',
                        lastName: 'Smith',
                        gender: 'female',
                        dependant: false,
                        birthdate: '1979-02-17'
                    }
                ]
            }
        };*/
    });

</script>



<%- include('partials/footer/footer') %>